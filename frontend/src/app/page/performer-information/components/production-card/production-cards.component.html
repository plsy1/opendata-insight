<div *ngIf="isLoading" class="loading-state">
  <i class="fas fa-spinner fa-spin"></i>
  <span>{{ 'DETAILS.LOADING_WORKS' | translate }}</span>
</div>

<ng-container *ngIf="!isLoading">
  <div class="top-bar">
    <!-- 筛选框 -->
    <mat-form-field class="search-box" appearance="outline">
      <mat-label>{{ 'DETAILS.FILTER_TYPE' | translate }}</mat-label>
      <mat-select
        [(ngModel)]="actressNumberFilter"
        (ngModelChange)="onFilterChange($event)"
      >
        <mat-select-trigger>
          {{
            actressNumberFilter === "0"
              ? ('DETAILS.FILTER_ALL' | translate)
              : actressNumberFilter === "1"
              ? ('DETAILS.FILTER_SINGLE' | translate)
              : actressNumberFilter === "2"
              ? ('DETAILS.FILTER_SALE' | translate)
              : ('DETAILS.FILTER_TYPE' | translate)
          }}
        </mat-select-trigger>
        <mat-option [value]="'0'">{{ 'DETAILS.FILTER_ALL' | translate }}</mat-option>
        <mat-option [value]="'1'">{{ 'DETAILS.FILTER_SINGLE' | translate }}</mat-option>
        <mat-option [value]="'2'">{{ 'DETAILS.FILTER_SALE' | translate }}</mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <app-pagination
    [page]="this.page"
    (previousClick)="loadPreviousPage()"
    (nextClick)="loadNextPage()"
  ></app-pagination>

  <div class="poster-grid">
    <ng-container *ngFor="let movie of discoverResults">
      <app-movie-card
        *ngIf="shouldShowMovie(movie)"
        [id]="movie.id"
        [title]="movie.title"
        [imgUrl]="movie.img_url"
        [releaseDate]="movie.release_date"
        [actors]="movie.actors"
        (movieClick)="onMovieClick(movie)"
              [enableBlur]="service.isEnableBlur$() | async"
      ></app-movie-card>
    </ng-container>
  </div>

  <app-pagination
    [page]="this.page"
    (previousClick)="loadPreviousPage()"
    (nextClick)="loadNextPage()"
  ></app-pagination>
</ng-container>
