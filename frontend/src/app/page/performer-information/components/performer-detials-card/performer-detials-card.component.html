<div *ngIf="isLoading" class="loading-state">
  <i class="fas fa-spinner fa-spin"></i>
  <span>{{ 'COMMON.LOADING' | translate }}</span>
</div>

<div class="performer-page" *ngIf="!isLoading && performerInformation">
  <!-- ① Hero Section: Avatar + Title + Actions -->
  <div class="hero-section">
    <div class="avatar-wrapper">
      <img
        [src]="performerInformation.avatar_url || 'assets/logo.svg'"
        alt="Actress Avatar"
        class="actress-avatar-img"
        [class.blurred]="common.enableBlur$ | async"
      />
    </div>

    <div class="hero-content">
      <h1 class="actress-name">
        <ng-container *ngIf="performerInformation.ruby; else plainName">
          <ruby>
            {{ name || "N/A" }}
            <rt>{{ performerInformation.ruby }}</rt>
          </ruby>
        </ng-container>
        <ng-template #plainName>{{ name || "N/A" }}</ng-template>
      </h1>
      
      <!-- Meta Pills -->
      <div class="meta-pills">
        <span class="meta-pill" *ngIf="performerInformation.birthday">
          <i class="fas fa-calendar-alt"></i>{{ performerInformation.birthday }}
        </span>
        <span class="meta-pill" *ngIf="performerInformation.height">
          <i class="fas fa-arrows-alt-v"></i>{{ performerInformation.height }} cm
        </span>
        <span class="meta-pill" *ngIf="performerInformation.cup">
          <i class="fas fa-glass-whiskey"></i>Cup {{ performerInformation.cup }}
        </span>
        <span class="meta-pill" *ngIf="performerInformation.blood_type">
          <i class="fas fa-tint"></i>Type {{ performerInformation.blood_type }}
        </span>
        <span class="meta-pill" *ngIf="performerInformation.prefectures">
          <i class="fas fa-map-marker-alt"></i>{{ performerInformation.prefectures }}
        </span>
      </div>

      <!-- Action Buttons -->
      <div class="actions">
        <button class="action-btn primary" (click)="subscribeActor()">
          <mat-icon>rss_feed</mat-icon> {{ 'DETAILS.SUBSCRIBE' | translate }}
        </button>
        <button class="action-btn secondary" (click)="collectActor()">
          <mat-icon>favorite</mat-icon> {{ 'DETAILS.COLLECT' | translate }}
        </button>
        <button class="action-btn ghost" (click)="searchByName()">
          <mat-icon>search</mat-icon> {{ 'DETAILS.SEARCH_TORRENTS' | translate }}
        </button>
      </div>

      <!-- Social Media (Clean Row) -->
      <div class="social-row" *ngIf="performerInformation.social_media?.length">
        <div *ngFor="let platform of performerInformation.social_media">
          <a
            *ngIf="platform.platform !== 'RSS'"
            [href]="platform.link"
            target="_blank"
            rel="noopener"
            class="social-link"
            [title]="platform.platform"
          >
            <i [ngClass]="getFaIcon(platform.platform)" class="social-icon"></i>
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- ② Details Grid -->
  <div class="details-grid">
    <section class="info-card">
      <div class="section-label"><i class="fas fa-info-circle"></i> {{ 'DETAILS.BIOGRAPHY' | translate }}</div>
      <div class="detail-list">
        <div class="detail-row" *ngIf="performerInformation.aliases.length">
          <span class="detail-label">{{ 'DETAILS.ALIASES' | translate }}</span>
          <span class="detail-value">{{ performerInformation.aliases.join(", ") }}</span>
        </div>
        <div class="detail-row" *ngIf="performerInformation.hobby">
          <span class="detail-label">{{ 'DETAILS.HOBBIES' | translate }}</span>
          <span class="detail-value">{{ performerInformation.hobby }}</span>
        </div>
        <div class="detail-row" *ngIf="performerInformation.bust || performerInformation.waist || performerInformation.hip">
          <span class="detail-label">{{ 'DETAILS.MEASUREMENTS' | translate }}</span>
          <span class="detail-value">
            B{{ performerInformation.bust || '?' }} / W{{ performerInformation.waist || '?' }} / H{{ performerInformation.hip || '?' }}
          </span>
        </div>
      </div>
    </section>
  </div>
</div>
